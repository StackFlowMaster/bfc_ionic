<ion-view class="story_list_page">
  
  <ion-header-bar class="header_bar bar bar-header bar-stable">
    <!--button class="button button-icon button-clear icon ion-android-download" ng-click="all_story_download()">
    </button-->

    <div class="title">
      {{$root.translates.translation_site}}
    </div>

    <button class="button button-icon button-clear icon ion-navicon" menu-toggle="right">
    </button>

  </ion-header-bar>

  <!--ion-header-bar class="bar-light bar-subheader search_bar">
    <label class="item item-input">
      <i class="icon ion-search placeholder-icon"></i>
      <input type="search" placeholder="Search Story..." ng-model="search">
      <button ng-show="search.length" class="button button-icon ion-android-close input-button" ng-click="clearSearch()">
      </button>
    </label>
  </ion-header-bar-->

  <ion-content padding="false" scroll="true">

    <div style="width: 100%; text-align:center; margin-top: 10px;" ng-show="is_list_loading">
      <ion-spinner icon="android"></ion-spinner>
    </div>

    <!--div class="error" style="margin: 5px; color:red;">
      <i class="icon ion-ios-close-circle"></i> {{msg}}
    </div-->

    <div class="item item-icon-left error" ng-show="err==1">
      <i class="icon ion-alert-circled"></i>
      {{msg}}
    </div>

    <ion-list ng-show="!is_list_loading">
      
      <h2 class="list-heading">{{$root.translates.translation_old_testament}}</h2>
      <ion-item class="item item-icon-right" href="" ng-if="old.testament=='old'" ng-repeat="old in story_list">
        <h2 class="story_no">{{old.story_order}}.</h2>
        <h2 class="story_name">{{old.story_translated_title}}</h2>
        <span class="item-note positive" ng-show="old.status=='d'">
          {{old.percent}}%
        </span>

        <!--span ng-if="old.story_modified_date != old.r_story_modified_date  && old.status == 'y'" class="badge badge-assertive">New</span-->
        <i ng-show="old.story_modified_date != old.r_story_modified_date  && old.status == 'y'" class="icon ion-ios-cloud-download-outline assertive second_btn" ng-click="story_download(old.index)"></i>
        <i ng-show="old.status=='n'" class="icon ion-ios-cloud-download-outline first_btn" ng-click="story_download(old.index)"></i>
        <i ng-show="old.status=='d'" class="icon positive ion-ios-cloud-download-outline first_btn"></i>
        <i ng-show="old.status=='y'" class="icon balanced ion-ios-book-outline first_btn" ng-click="checkStory(old.index)"></i>
        
      </ion-item>

      <h2 class="list-heading">{{$root.translates.translation_new_testament}}</h2>
      <ion-item class="item item-icon-right" href="" ng-if="new.testament=='new'" ng-repeat="new in story_list">
        <h2 class="story_no">{{new.story_order}}.</h2>
        <h2 class="story_name">{{new.story_translated_title}}</h2>
        <span class="item-note positive" ng-show="new.status=='d'">
          {{new.percent}}%
        </span>

        <!--span ng-if="new.story_modified_date != new.r_story_modified_date && new.status == 'y'" class="badge badge-assertive">New</span-->
        <i ng-show="new.story_modified_date != new.r_story_modified_date  && new.status == 'y'" class="icon ion-ios-cloud-download-outline assertive second_btn" ng-click="story_download(new.index)"></i>
        <i ng-show="new.status=='n'" class="icon ion-ios-cloud-download-outline first_btn" ng-click="story_download(new.index)"></i>
        <i ng-show="new.status=='d'" class="icon positive ion-ios-cloud-download-outline first_btn"></i>
        <i ng-show="new.status=='y'" class="icon balanced ion-ios-book-outline first_btn" ng-click="checkStory(new.index)"></i>

      </ion-item>

    </ion-list>

  </ion-content>
  
</ion-view>

